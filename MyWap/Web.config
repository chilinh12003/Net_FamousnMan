<?xml version="1.0"?>
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <section name="casClientConfig" type="DotNetCasClient.Configuration.CasClientConfiguration, DotNetCasClient"/>
    <section name="urlrewritingnet" restartOnExternalChanges="true" requirePermission="false" type="UrlRewritingNet.Configuration.UrlRewriteSection, UrlRewritingNet.UrlRewriter"/>
   
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
    <appSettings>
    
    <add key="Domain" value="http://localhost:8082/FamousMan_Wap"/>
    <!--Link Resource-->
    <add key="DomainResource" value="http://localhost:8082/FamousMan_Wap"/>
    <add key="ResourceLink" value="http://localhost:8082/FamousMan_Wap"/>
    
     <!--Cau hinh Vinaphone-->
    <add key="Servicename_VNP" value="TPTT"/>
    <add key="Securepass_VNP" value="Zonevui#1234"/>
    <add key="URLGetMSISDN_VNP" value="http://10.1.10.47/mim1step/getmsisdn"/>

      <add key="VNPLink_Reg" value="http://dk.vinaphone.com.vn/reg.jsp"/>
      <add key="VNPLink_Dereg" value="http://dk.vinaphone.com.vn/unreg.jsp"/>
      <add key="VNPCPName" value="HBCOM"/>
      <add key="VNPSecurepass" value="hbcom!u8Ag7"/>
      <add key="VNPService" value="NGUOINOITIENG"/>
      
    <!--Link cua trang web-->
    <add key="LinkWeb" value="http://localhost:8082/FamousMan_web"/>

    <add key="LicenseKey" value="oS/OuBhRatlgQFIjps25BxMp0AI0K8HNIksCXhqoAsKOpb+6I1dPqRamyg/MfbkJ3zCHGNqiHSGbaKvhF/e7Vw==" />
      <add key="IsLoadDeviceOnStart" value="false"/>
  </appSettings>
  <connectionStrings>
    <add name="strConnection" providerName="System.Data.SqlClient" connectionString="/d9t1bxPbWXyvgdypXTUzq782IgMILwvSQnNMDPHEUPfXOxArOcDdbPSipDHMeZh0LNdUU4AkXtKmEcqSy9VzGlzAgPXwlnkt4c90CgT8Nc4ey+qD/VCNFiL+4TvqgMlmi6k8zOzuGH0wkXC1Ag3IvRaxhZ/nqbW8HmEvZjqf+VFikn9tTue1fhw2EcQ495ZxR7vzv0KzgVmDCIXBjyD4+vuCAskETeAgcYgJv30sN4="/>
  </connectionStrings>
  <casClientConfig
     casServerLoginUrl="https://vinaphone.com.vn/auth/login"
     casServerUrlPrefix="https://vinaphone.com.vn/auth/"
     serverName="http://nguoinoitieng.vinaphone.com.vn/wap"
     notAuthorizedUrl="~/NotAuthorized.aspx"
     cookiesRequiredUrl="~/CookiesRequired.aspx"
     redirectAfterValidation="true"
     gateway="false"
     renew="false"
     singleSignOut="true"
     ticketTimeTolerance="5000"
     ticketValidatorName="Cas20"
     proxyTicketManager="CacheProxyTicketManager"
     serviceTicketManager="CacheServiceTicketManager"
     gatewayStatusCookieName="CasGatewayStatus" />
  <system.web>
    <compilation debug="true">

      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>

    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Forms">
      <forms
          loginUrl="https://vinaphone.com.vn/auth/login"
          timeout="30"
          defaultUrl="~/Default.aspx"
          cookieless="UseCookies"
          slidingExpiration="true"
          path="/nguoinoitieng.vinaphone.com.vn/wap/" />
    </authentication>
    <authorization>
      <allow users="*"/>
    </authorization>

    <customErrors mode="Off"></customErrors>
    
    <trust level="Full"/>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>

    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>

  </system.web>

  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>

  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0.  It is not necessary for previous version of IIS.
    -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule"/>
      <add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter"/>
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <add name="MyASHXBase" path="*.html" verb="GET,HEAD,POST,DEBUG" type="MyBase.MyWap.MyWapBase" resourceType="Unspecified" preCondition="integratedMode"/>
      <add name="AjaxHander" path="*.ajax" verb="GET,HEAD,POST,DEBUG" type="MyAjax.Ajax.MyAjaxHander"/>

      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
    <defaultDocument>
      <files>
        <clear/>
        <add value="default.aspx"/>
      </files>
    </defaultDocument>
  </system.webServer>
  <urlrewritingnet rewriteOnlyVirtualUrls="true" contextItemsPrefix="QueryString" defaultPage="Default.aspx" defaultProvider="RegEx" xmlns="http://www.urlrewriting.net/schemas/config/2006/07">
    <rewrites>
      <add name="rule_11" virtualUrl="^~/page/home.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/home.ashx" ignoreCase="true"/>
      <add name="rule_12" virtualUrl="^~/page/accept.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/accept.ashx" ignoreCase="true"/>
      <add name="rule_13" virtualUrl="^~/page/guide.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/guide.ashx" ignoreCase="true"/>
      <add name="rule_14" virtualUrl="^~/page/service.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/service.ashx" ignoreCase="true"/>
      <add name="rule_15" virtualUrl="^~/page/reg.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/reg.ashx" ignoreCase="true"/>
      <add name="rule_16" virtualUrl="^~/page/rule.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/rule.ashx" ignoreCase="true"/>
      <add name="rule_17" virtualUrl="^~/page/contact.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/contact.ashx" ignoreCase="true"/>
      <add name="rule_18" virtualUrl="^~/page/faq.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/faq.ashx" ignoreCase="true"/>
      <add name="rule_19" virtualUrl="^~/page/promo.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/promo.ashx" ignoreCase="true"/>
      <add name="rule_20" virtualUrl="^~/page/winner.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/winner.ashx" ignoreCase="true"/>
      <add name="rule_21" virtualUrl="^~/page/dereg.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/dereg.ashx" ignoreCase="true"/>
      <add name="rule_22" virtualUrl="^~/Notify.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/Notify.ashx" ignoreCase="true"/>
      <add name="rule_23" virtualUrl="^~/reg/register.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/reg/register.ashx" ignoreCase="true"/>
      <add name="rule_24" virtualUrl="^~/reg/accept.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/reg/accept.ashx" ignoreCase="true"/>

      <add name="rule_25" virtualUrl="^~/vnp/(.*)/redirectvnp.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/VNP/RedirectVNP.ashx?aid=$1" ignoreCase="true"/>

      
    </rewrites>
  </urlrewritingnet>

  <runtime>
    <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="ActionSoap" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8082/FamousMan_WebService/Action.asmx"
        binding="basicHttpBinding" bindingConfiguration="ActionSoap"
        contract="MyService.ActionSoap" name="ActionSoap" />
    </client>
  </system.serviceModel>
  <system.diagnostics>
    <trace autoflush="true" useGlobalLock="false" />
    <sharedListeners>
      <!--
                Writing trace output to a log file is recommended.
                IMPORTANT:
                The user account under which the containing application pool runs
                must have privileges to create and modify the trace log file.
            -->
      <add name="TraceFile"
           type="System.Diagnostics.TextWriterTraceListener"
           initializeData="C:\inetpub\logs\LogFiles\DotNetCasClient.Log"
           traceOutputOptions="DateTime" />
    </sharedListeners>
    <sources>
      <!-- Provides diagnostic information on module configuration parameters. -->
      <source name="DotNetCasClient.Config" switchName="Config" switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <add name="TraceFile" />
        </listeners>
      </source>

      <!-- Traces IHttpModule lifecycle events and meaningful operations performed therein. -->
      <source name="DotNetCasClient.HttpModule" switchName="HttpModule" switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <add name="TraceFile" />
        </listeners>
      </source>

      <!-- Provides protocol message and routing information. -->
      <source name="DotNetCasClient.Protocol" switchName="Protocol" switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <add name="TraceFile" />
        </listeners>
      </source>

      <!-- Provides details on security operations and notable security conditions. -->
      <source name="DotNetCasClient.Security" switchName="Security" switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <add name="TraceFile" />
        </listeners>
      </source>
    </sources>
    <switches>
      <!--
                Set trace switches to appropriate logging level.  Recommended values in order of increasing verbosity:
                - Off
                - Error
                - Warning
                - Information
                - Verbose
            -->
      <!--
                Config category displays detailed information about CasAuthenticationModule configuration.
                The output of this category is only displayed when the module is initialized, which happens
                for the first request following application/server startup.
            -->
      <add name="Config" value="Information"/>

      <!--
                Set this category to Verbose to trace HttpModule lifecycle events in CasAuthenticationModule.
                This category produces voluminous output in Verbose mode and should be avoided except for
                limited periods of time troubleshooting vexing integration problems.
            -->
      <add name="HttpModule" value="Verbose"/>

      <!--
                Set to Verbose to display protocol messages between the client and server.
                This category is very helpful for troubleshooting integration problems.
            -->
      <add name="Protocol" value="Information"/>

      <!--
                Displays important security-related information.
            -->
      <add name="Security" value="Information"/>
    </switches>
  </system.diagnostics>

  <log4net debug="true">
    <appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="LogFile/Log" />
      <datePattern value="'.'ddMMyyyy.vai" />
      <staticLogFileName value="false" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <maxSizeRollBackups value="100" />
      <maximumFileSize value="50MB" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date | %thread | %level | %logger | %message%newline" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="DEBUG" />
        <levelMax value="WARN" />
      </filter>
    </appender>

    <appender name="ErrorsFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="LogFile/Error" />
      <datePattern value="'.'ddMMyyyy.vai" />
      <staticLogFileName value="false" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <maxSizeRollBackups value="100" />
      <maximumFileSize value="50MB" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date | %thread | %level | %logger  %message%newline" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="ERROR" />
        <levelMax value="FATAL" />
      </filter>
    </appender>

    <root>
      <level value="ALL" />
      <appender-ref ref="FileAppender" />
      <appender-ref ref="ErrorsFileAppender" />
    </root>
  </log4net>
</configuration>
